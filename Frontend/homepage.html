<!DOCTYPE html>
<html lang="en"><title>homepage</title>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/Style/homepage.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Lato:ital,wght@0,100;0,300;0,400;0,700;0,900;1,100;1,300;1,400;1,700;1,900&display=swap" rel="stylesheet">
    <title>Document</title>
</head>
<body>
<div class="all">
    <div class="container">
        <div class="menu" id="menu"><div class="upper">
            <div class="profile">
                <div class="circle"><a id="profile-link" href="profile.html"><img src="/images/profile2.png"></a></div>
                <h6 id="username">JACK</h6>
            </div>
            <div class="rest">
                <div class="marks"><img src="/images/bookmark.png"><p onclick="window.location.href='bookmark.html'">Bookmark</p></div>
                <div class="marks"><img src="/images/target.png" ><p onclick="open_goal()">Study Goal</p></div>
                <div class="marks"><img src="/images/QOD.png"><p onclick="fetchQuestions()">Question Of The Day</p></div>
                <div class="marks"><img src="/images/achievement2.png"><p onclick="window.location.href='badge.html'">Achievements</p></div>
            </div>
        </div>
        <div class="logout">
            <div class="logout-button"><button onclick="logout()">Log out</button></div>
        </div>
    </div>
        <div class="left">
            <a><button id="b1" onclick="toggle()"><img src="/images/DASHBOARD3.png"></button></a>
                <h1>Masters Prep Quiz</h1>
        </div>
        <div class="right">
            <nav><ul>
                <a href="#"id="scrollExam"><li>Exams</li></a>
                <a href="#"id="scrollabout"><li>About</li></a>
                <a href="#" id="scrollcontact"><li>Contact</li></a>
            </ul>
            </nav>
        </div>
    </div>
    <a href="https://www.shiksha.com/mba/cat-exam" id="headline"><marquee><div class="marquee">CAT Exam 24 Nov 2024</div></marquee></a>
        <div class="image"><img src="/images/logonew.png"></div>
        <div class="background-color"></div>
        <div class="search-container">
            <input type="text"  id="searchInput"  onkeyup="filterOptions()"  class="search-bar" placeholder="Search...">
            <div id="dropdownList" class="dropdown-content"></div>
        </div>
        <div class="centerbox">
            <div class="top">Master Your Entrance Exam</div><div class="line"></div>
            <div class="bottom">Prepare, Practice, Achieve Success</div>   
        </div>
</div>

<div class="popup_qotd" id="popup_qotd">
    <div class="headquiz">
        <p id="current-date"></p>
        <h2>Question Of The Day</h2>
    </div>
    <div class="question">    
        <p id="question-text"></p>
        <ul id="questions-list"></ul>
    </div>
    <div class="buttons">
        <button class="submit-btn" onclick="submitAnswers()">Submit</button>
        <button class="skip-btn" onclick="closePopup()">Close</button>
    </div>
</div>
    

        <p class="exams" id="exams">EXAMS</p><p class="line2"></p>
        <div class="exam-grid" id="exam-grid">
            <div class="exam-box">
                <a class="examname" id="CAT">CAT</a>
                <p>The CAT (Common Admission Test) is a highly competitive entrance exam conducted annually by the Indian Institutes of Management (IIMs) for admission to various management programs.</p>
                <a href="CAT.html" class="learn-more">Get&nbsp;Started>></a>
            </div>
            <div class="exam-box">
                <a class="examname">CMAT</a>
                <p>The CMAT (Common Management Admission Test) is a national-level entrance exam conducted by the National Testing Agency (NTA) for admission to MBA programs in various institutions across India.</p>
                <a href="CMAT.html" class="learn-more">Get&nbsp;Started>></a>
            </div>
            <div class="exam-box">
                <a class="examname">NIMCET</a>
                <p>The NIMCET (NIT MCA Common Entrance Test) is an entrance exam conducted by the National Institutes of Technology (NITs) in India for admission in various NIT's to MCA programs.</p>
                <a href="NIMCET.html" class="learn-more">Get&nbsp;Started>></a>
            </div>  
            <div class="exam-box">
                <a class="examname">MAT</a>
                <p>Management Aptitude Test, popularly known as MAT, is an entrance test that is being administered to aspiring candidates, who are willing to pursue a Master of Business Management as their professional career.</p>
                <a href="MAT.html" class="learn-more">Get&nbsp;Started>></a>
            </div>
        </div>
        <div id="aboutus">
            <h2>About Us</h2>
            <div class="about-content">
                <img src="/images/about us.png" >
                <p>Welcome to our online quiz platform, your ultimate partner in preparing for competitive entrance exams like CAT, CMAT, NIMCET and MAT. Our quizzes are meticulously tailored to meet the specific needs of each exam, covering a broad range of topics and difficulty levels. Practice with our timed quizzes and use our comprehensive analytics to track your progress, identify your strengths and weaknesses, and boost your chances of success in gaining admission to master's degree programs.</p>
            </div>
        </div>


        <div class="study" id="study">
            <div class="title">STUDY GOALS<img src="/images/cross.png" class="close" onclick="close_goal()"/></div>
            <div class="underline"></div>
            <div class="add_goal">
                <img src="/images/Goals.png" alt="Goal Icon">
                <p class="goal_text">Set goals for your practice</p>
                <button class="add" onclick="open_setgoal()">+</button> 
            </div>
            <div id="goalList" class="goalList">
            </div>
        </div>
        
        <div class="set_goal" id="set_goal">
            <div class="img2"><img src="/images/Goals2.png"><img src="/images/cross.png" class="close" onclick="close_setgoal()"/></div>
            <h2>SET YOUR GOALS</h2>
            <p>We recommend preparation for at least 2 Hours daily for a better result.</p>
                
            <div class="form-group-inline">
                <div class="form-group">
                    <label for="hours">Hours per day :</label>
                    <select id="hours">
                        <option value="">Select hours</option>
                        <option value="1">1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                        <option value="6">6</option>
                        <option value="7">7</option>
                    </select>
                </div>
                <button class="save-btn" onclick="saveGoals()">SAVE</button>
            </div>
        </div>
        
        <div id="timerStatus"></div>


    <div class="slider-container">
            <div class="slider" id="slider">
                <a href="https://collegedunia.com/" target="_blank">
                   <div class="slide123">
                    <div class="slogan">TOP UNIVERSITIES</div>
                    <div style="background-image: url('/images/msu2.jpg');"></div>
                    </div>
                </a>
                <a href="https://itcareerswitch.co.uk/success-stories/" target="_blank">
                    <div class="slide123">
                    <div class="slogan">SUCCESS STORIES</div>
                    <div  class="img3" style="background-image: url('/images/sucess4.jpg');"></div>
                    </div>
                </a>
                <a href="https://www.theverge.com/tech" target="_blank">
                    <div class="slide123">
                        <div class="slogan">TRENDING TECH NEWS</div>
                    <div style="background-image: url('/images/news3.jpg');"></div>
                    </div>
                </a>
            </div>
            <button class="prev" onclick="moveSlide(-1)">❮</button>
            <button class="next" onclick="moveSlide(1)">❯</button>
        </div>

        <section style="margin-top:-84px" class="contact-us" id="contactus">
            <h2 class="contact-heading">Contact Us</h2>
            <div  id="instagram" class="contact-item">
                <img src="/images/instagram.png" alt="Twitter" class="contact-icon">
                <a href="https://www.instagram.com/mastersprepquiz/?utm_source=ig_web_button_share_sheet" target="_blank">Instagram</a>
            </div>
            <div  id="email" class="contact-item">
                <img src="/images/email.png" alt="Email" class="contact-icon">
                <a href="mailto:masterprepquiz@gmail.com" target="_blank">masterprepquiz@gmail.com</a>
            </div>
            <div  id="phone" class="contact-item">
                <img src="/images/phone.png" alt="Phone" class="contact-icon">
                <a href="https://chat.whatsapp.com/C0LNPGH7VdPJTgfWOo05XN" target="_blank">Whatsapp Community</a>
            </div>
            <div  id="linkedin" class="contact-item">
                <img src="/images/linkedin.png" alt="LinkedIn" class="contact-icon">
                <a href="https://linkedin.com/" target="_blank">LinkedIn</a>
            </div>
            <!-- Add more social handles if needed -->
        </section>

        
        <script>

function logout() {
        // Redirect to the login page, replace the current page in the history
        window.location.replace('signin.html');
    }

    // Prevent the user from going back after logging out
    window.history.pushState(null, "", window.location.href);
    window.onpopstate = function () {
        // This prevents the user from using the back button
        window.history.pushState(null, "", window.location.href);
    };



    function getQueryParams() {
            const params = new URLSearchParams(window.location.search);
            return {
                username: params.get('username'),
                email: params.get('email'),
                gender: params.get('gender'),
                firstName: params.get('firstName'),
                lastName: params.get('lastName'),
                phone: params.get('phone'),
                birthDate: params.get('birthDate')
            };
        }

        window.onload = function() {
            const userData = getQueryParams();
            if (userData.username) {
                // Display the username in the welcome message
                document.getElementById('username').innerText = userData.username.toLocaleUpperCase();
                
                // Update the profile link to include user data
                //http://127.0.0.1:5500/Frontend/homepage.html?username=Heli_Patel&email=heli@gmail.com&gender=Female
                //http://127.0.0.1:5500/Frontend/User/profile.html
                //const queryParams = `?username=${userData.username}&email=${userData.email}&gender=${userData.gender}`;
                const queryParams = `?username=${encodeURIComponent(userData.username)}&email=${encodeURIComponent(userData.email)}&gender=${encodeURIComponent(userData.gender)}`;
                document.getElementById('profile-link').href = `profile.html${queryParams}`;
            }
        };

// Function to set today's date in the popup
function setDate() {
    const dateElement = document.getElementById('current-date');
    const today = new Date();
    const formattedDate = today.toLocaleDateString('en-GB', {
        day: '2-digit',
        month: '2-digit',
        year: 'numeric'
    });
    dateElement.textContent = formattedDate; // Set date in 'dd/mm/yyyy' format
}

async function fetchQuestions() {
    try {
        // Fetch today's question from the Question of the Day API
        const response = await fetch('http://localhost:3000/api/question_of_the_day');
        if (!response.ok) {
            throw new Error('Network response was not ok');
        }
        const questions = await response.json();
        fetchedQuestions = questions;

        // Log the fetched questions to the console
        console.log('All fetched questions:', fetchedQuestions);

        // Clear existing questions
        const questionsList = document.getElementById('questions-list');
        questionsList.innerHTML = '';

        // Ensure only today's question is loaded
        if (fetchedQuestions.length === 0) {
            const noQuestionMessage = document.createElement('p');
            noQuestionMessage.textContent = 'No Question of the Day available for today.';
            questionsList.appendChild(noQuestionMessage);
            return;
        }

        // Set the question text and options
        fetchedQuestions.forEach((question, index) => {
            // Set the question text
            const questionText = document.getElementById('question-text');
            questionText.textContent = question.question; // Set question text

            // Clear existing options before adding new ones
            const optionsList = document.getElementById('questions-list');
            optionsList.innerHTML = ''; // Clear existing options

            question.options.forEach((option, optionIndex) => {
                const optionItem = document.createElement('li'); // Create a list item for each option
                optionItem.innerHTML = `
                    <label>
                        ${option}
                        <input type="radio" name="question${index}" value="${optionIndex}">
                    </label>`;
                optionsList.appendChild(optionItem); // Append each option item to the options list
            });
        });

        let popup = document.getElementById("popup_qotd");
        setDate(); // Set the date when fetching questions
        popup.classList.add('open_QOD'); // Show popup
        let background = document.querySelector('.all');
        background.classList.add("blurred");
        addOptionSelectionHandlers(); // Add event listeners for option selection
    } catch (error) {
        console.error('Error fetching question of the day:', error);
    }
}

// Function to add event listeners to each radio button for color change on selection
function addOptionSelectionHandlers() {
    fetchedQuestions.forEach((question, index) => {
        const options = document.getElementsByName(`question${index}`);

        options.forEach((option) => {
            option.addEventListener('change', () => {
                // Clear previously selected option styles
                options.forEach((opt) => {
                    opt.parentElement.parentElement.classList.remove('selected');
                });

                // Add the 'selected' class to the current option's parent <li>
                if (option.checked) {
                    option.parentElement.parentElement.classList.add('selected');
                }
            });
        });
    });
}

function submitAnswers() {
    fetchedQuestions.forEach((question, index) => {
        // Get the selected answer for the current question
        const selectedAnswer = document.querySelector(`input[name="question${index}"]:checked`);

        // Get the correct answer index from the question object
        const correctAnswerIndex = question.correct_option.toString(); // Ensure it's a string for comparison

        // Get the options list for the current question
        const options = document.getElementsByName(`question${index}`);

        // Check if an answer is selected
        if (!selectedAnswer) {
            console.log(`No answer selected for question ${index}`);
            return;
        }

        // Loop through each option and apply correct/incorrect classes
        options.forEach(option => {
            const parentLi = option.parentElement.parentElement; // The <li> element wrapping the label

            // Clear previous styles
            parentLi.classList.remove('correct', 'incorrect'); // Reset previous classes

            if (option.value === correctAnswerIndex) {
                // If this option is the correct answer
                parentLi.classList.remove('selected');
                parentLi.classList.add('correct');
            }

            if (option.checked && option.value !== correctAnswerIndex) {
                // If this is the selected option and it's incorrect
                parentLi.classList.remove('selected');
                parentLi.classList.add('incorrect');
            }
        });
    });

    console.log('Answers processed and highlighted.');
}

function closePopup() {
    document.getElementById('popup_qotd').classList.remove('open_QOD');
    let background = document.querySelector('.all');
    background.classList.remove("blurred");
}



            document.getElementById("scrollcontact").addEventListener("click", function(event) {
    event.preventDefault(); // Prevents the default link behavior
    document.getElementById("contactus").scrollIntoView({
        behavior: "smooth"
    });
});
             document.getElementById("scrollabout").addEventListener("click", function(event) {
    event.preventDefault(); // Prevents the default link behavior
    document.getElementById("aboutus").scrollIntoView({
        behavior: "smooth"
    });
});
            document.getElementById("scrollExam").addEventListener("click", function(event) {
    event.preventDefault(); // Prevents the default link behavior
    document.getElementById("exams").scrollIntoView({
        behavior: "smooth"
    });
});

            function toggle() {
                let menuBar = document.getElementById('menu');
                menuBar.classList.toggle('show');
            }


            let study = document.getElementById("study");
let countdownIntervals = {}; // Object to hold intervals for each goal
let goalTimers = []; // Array to hold timers for each goal

function open_goal() {
    study.classList.add("open_goal");
    let background = document.querySelector('.all');
    background.classList.add("blurred");
}

function close_goal() {
    study.classList.remove("open_goal");
    let background = document.querySelector('.all');
    background.classList.remove("blurred");
}

let set_goal = document.getElementById("set_goal");

function open_setgoal() {
    set_goal.classList.add("open_setgoal");
    let background = document.querySelector('.study');
    background.classList.add("blurred");
}

function close_setgoal() {
    set_goal.classList.remove("open_setgoal");
    let background = document.querySelector('.study');
    background.classList.remove("blurred");
}

document.addEventListener("DOMContentLoaded", function() {
    loadSavedGoals();
    
    // Handle visibility change event
    document.addEventListener("visibilitychange", function() {
        if (document.visibilityState === 'hidden') {
            pauseAllTimers(); // Pause all timers when the tab is not visible
        } else {
            startAllTimers(); // Start all timers when the tab is visible again
        }
    });
});

function saveGoals() {
    const hoursPerDay = document.getElementById("hours").value;

    if (hoursPerDay) {
        let goals = JSON.parse(sessionStorage.getItem("goals")) || [];
        const newGoal = { hoursPerDay: hoursPerDay, remainingTime: hoursPerDay * 1000 }; // Convert hours to milliseconds
        goals.push(newGoal);
        sessionStorage.setItem("goals", JSON.stringify(goals));
        loadSavedGoals();
        close_setgoal(); // Close the form after saving

        // Start the timer for the newly added goal
        startTimer(newGoal, goals.length - 1);
    } else {
        alert("Please fill out all fields before saving.");
    }
}

function startTimer(goal, index) {
    // Check if a timer is already running for this goal
    if (goalTimers[index] != null) return; // Prevent multiple timers for the same goal

    const remainingTime = goal.remainingTime; // Get the goal's remaining time
    goalTimers[index] = remainingTime; // Store remaining time for this goal

    const goalDiv = document.getElementById("goalList").children[index];
    
    const countdownDisplay = document.createElement("p");
    countdownDisplay.className = "goal_timer";
    countdownDisplay.innerText = `Time remaining: ${Math.floor(remainingTime / 3600000)}h`;
    
    countdownDisplay.style.marginRight = "50px"; 
    countdownDisplay.style.marginTop = "10px"; 
    countdownDisplay.style.display = "inline-block"; 
    countdownDisplay.style.fontSize = "18px"; 

    goalDiv.appendChild(countdownDisplay);

    countdownIntervals[index] = setInterval(() => {
        goalTimers[index] -= 1000; 

        const hours = Math.floor(goalTimers[index] / (1000 * 60 * 60));
        const minutes = Math.floor((goalTimers[index] % (1000 * 60 * 60)) / (1000 * 60));
        const seconds = Math.floor((goalTimers[index] % (1000 * 60)) / 1000);

        countdownDisplay.innerText = `Time remaining: ${hours}h ${minutes}m ${seconds}s`;

        let goals = JSON.parse(sessionStorage.getItem("goals")) || [];
        goals[index].remainingTime = goalTimers[index];
        sessionStorage.setItem("goals", JSON.stringify(goals));

        if (goalTimers[index] <= 0) {
            clearInterval(countdownIntervals[index]); 
            countdownDisplay.innerText = 'Congrats! goal completed'; 
            goalTimers[index] = null; 
            
            alert(`Goal of ${goal.hoursPerDay} hours completed!`);
            
            goalDiv.style.backgroundColor = '#274681'; 
            goalDiv.style.color = 'white'; 
        }
    }, 1000);
}

/*function pauseAllTimers() {
    Object.keys(countdownIntervals).forEach(index => {
        clearInterval(countdownIntervals[index]); 
    });

    let goals = JSON.parse(sessionStorage.getItem("goals")) || [];
    goals.forEach((goal, index) => {
        goal.remainingTime = goalTimers[index] || 0; 
    });
    sessionStorage.setItem("goals", JSON.stringify(goals));
}

function startAllTimers() {
    const goals = JSON.parse(sessionStorage.getItem("goals")) || [];
    goals.forEach((goal, index) => {
        if (goal.remainingTime > 0 && !goal.completed) {
            startTimer(goal, index); 
        }
    });
}*/

function removeGoal(index) {
    let goals = JSON.parse(sessionStorage.getItem("goals")) || [];
    goals.splice(index, 1); 
    sessionStorage.setItem("goals", JSON.stringify(goals)); 
    loadSavedGoals(); 
}

function loadSavedGoals() {
    const goals = JSON.parse(sessionStorage.getItem("goals")) || [];
    const goalList = document.getElementById("goalList");
    goalList.innerHTML = ""; 

    if (goals.length > 0) {
        goals.forEach((goal, index) => {
            const goalDiv = document.createElement("div");
            goalDiv.className = "add_goal";
            goalDiv.style.position = "relative"; 

            if (goal.remainingTime <= 0) {
                goalDiv.style.backgroundColor = '#274681'; 
                goalDiv.style.color = 'white'; 
            }

            goalDiv.innerHTML = `<p class="goal_text">Goal ${goal.hoursPerDay} hours</p>`;

            const removeButton = document.createElement("button");
            removeButton.innerText = "X";
            removeButton.style.color = 'black';
            removeButton.style.backgroundColor = 'white'; 
            removeButton.style.border = 'none'; 
            removeButton.style.position = 'absolute'; 
            removeButton.style.top = '5px'; 
            removeButton.style.right = '5px'; 
            removeButton.style.padding = '5px 10px'; 
            removeButton.style.borderRadius = '50%'; 
            removeButton.style.cursor = 'pointer'; 
            removeButton.style.fontWeight = "600"

            removeButton.onclick = function() {
                removeGoal(index);
            };

            goalDiv.appendChild(removeButton); 

            goalList.appendChild(goalDiv); 

            if (goal.remainingTime > 0) {
                startTimer(goal, index); 
            }
        });
    } else {
        goalList.innerHTML = "<p>No goals set yet.</p>";
    }
}




            const options = [
    { name: "MAT", url: "mat.html" },
    { name: "CAT", url: "cat.html" },
    { name: "NIMCET", url: "nimcet.html" },
    { name: "CMAT", url: "cmat.html" },

];
document.getElementById("searchInput").addEventListener("keyup", function(event) {
    if (event.key === "Enter") {
        handleEnterPress();
    } else {
        filterOptions();
    }
});

function filterOptions() {
    const input = document.getElementById("searchInput").value.toLowerCase();
    const dropdown = document.getElementById("dropdownList");
    
    dropdown.innerHTML = '';
    
    if (input) {
        const filteredOptions = options.filter(option => option.name.toLowerCase().includes(input));
        filteredOptions.forEach(option => {
            const optionDiv = document.createElement("div");
            optionDiv.textContent = option.name;
            optionDiv.onclick = () => fillSearchBar(option.name);
            dropdown.appendChild(optionDiv);
        });
        dropdown.style.display = "block";
    } else {
        dropdown.style.display = "none";
    }
}

function fillSearchBar(selectedOption) {
    document.getElementById("searchInput").value = selectedOption;
    document.getElementById("dropdownList").style.display = "none";
    searchInput.focus(); 
}

function handleEnterPress() {
    const input = document.getElementById("searchInput").value.toLowerCase();
    const selectedOption = options.find(option => option.name.toLowerCase() === input);

    if (selectedOption) {
        window.location.href = selectedOption.url; // Redirect to the selected page
    } else {
        alert("No matching option found.");
    }
}

let currentIndex = 0;

function moveSlide(direction) {
    const slider = document.getElementById('slider');
    const totalSlides = slider.children.length;
    currentIndex += direction;

    if (currentIndex < 0) {
        currentIndex = totalSlides - 1;
    } else if (currentIndex >= totalSlides) {
        currentIndex = 0;
    }

    const offset = -currentIndex * 100; // Move the slider by 100% for each slide
    slider.style.transform = `translateX(${offset}%)`;
}



        </script>
</body>
</html>